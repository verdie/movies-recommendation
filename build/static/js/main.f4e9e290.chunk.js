(window.webpackJsonpmovies=window.webpackJsonpmovies||[]).push([[0],{31:function(e,t,n){e.exports=n(51)},36:function(e,t,n){},43:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(19),i=n.n(o),r=(n(36),n(9)),s=n(10),l=n(12),m=n(11),u=n(13),v=n(15),d=n(16),p=n(7),h=(n(43),function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(l.a)(this,Object(m.a)(t).call(this))).state={gens:[]},e}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;d.get("https://api.themoviedb.org/3/genre/movie/list?api_key=9f331ae5aeb7c6a0d55d497451cb6fca&language=en-US").then(function(t){e.setState({gens:t.body.genres})})}},{key:"render",value:function(){return console.log("STATE",this.state),c.a.createElement("div",{className:"wrap"},c.a.createElement("h2",null,"Please select category that you like"),c.a.createElement("div",{className:"category-wrapper"},this.state.gens.length?this.state.gens.map(function(e){return c.a.createElement(p.b,{key:e.id,to:"/genre/".concat(e.id)},c.a.createElement("p",{className:"genre-p"},e.name))}):null))}}]),t}(c.a.Component)),f="SELECT_MOVIES";var b=n(17),g=(n(49),function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(c)))).state={movies:[],selectedMovies:[],active:!1},n.onMovieClick=function(e,t){e.preventDefault(),n.state.selectedMovies.some(function(e){return e.id===t.id})||n.setState({selectedMovies:n.state.selectedMovies.concat(t),active:!0})},n.onRecommendationClick=function(e){n.props.selectMovies(n.state.selectedMovies)},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=Math.floor(10*Math.random());d.get("https://api.themoviedb.org/3/discover/movie?api_key=9f331ae5aeb7c6a0d55d497451cb6fca&language=en-US&sort_by=popularity.desc&include_adult=false&include_video=false&with_genres=".concat(this.props.match.params.genreId,"&page=").concat(t)).then(function(t){return e.setState({movies:t.body.results})})}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"wrap"},c.a.createElement("h2",null,"Please select movies that you like"),c.a.createElement("div",{className:"movies-wrapper"},this.state.movies.length?this.state.movies.map(function(t){var n=e.state.selectedMovies.find(function(e){return t.id===e.id});return c.a.createElement("div",{className:n?"active":"movie",key:t.id,onClick:function(n){e.onMovieClick(n,t)}},c.a.createElement("h4",null,t.title.slice(0,50)),c.a.createElement("div",{className:"movie-container"},c.a.createElement("img",{src:"http://image.tmdb.org/t/p/w185/".concat(t.poster_path),alt:"poster"})))}):null),c.a.createElement("div",{className:"buttons"},c.a.createElement(p.b,{to:"/recommendation",className:"show",onClick:this.onRecommendationClick},"Show Recommendation"),c.a.createElement(p.b,{className:"link",to:"/"},c.a.createElement("p",{className:"link-p"},"Go to main page"))))}}]),t}(c.a.Component));var E={selectMovies:function(e){return{type:f,payload:e}}},O=Object(b.b)(function(e){return{movies:e.movies}},E)(g);function y(e){var t={};return e.flat().forEach(function(e){t[e.id]||(t[e.id]={times:0}),t[e.id].times=t[e.id].times+1,t[e.id].movie=e}),Object.values(t).sort(function(e,t){return t.times-e.times})}n(50);var k=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(c)))).state={index:0,current:n.props.current?[n.props.current]:[]},n.onClick=function(e){e.preventDefault(),n.setState({index:n.state.index+1})},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.movies;Promise.all(t.map(function(e){return d.get("https://api.themoviedb.org/3/movie/".concat(e.id,"/recommendations?api_key=9f331ae5aeb7c6a0d55d497451cb6fca&language=en-US&page=1")).then(function(e){return e.body.results})})).then(function(t){e.setState({current:y(t)})})}},{key:"render",value:function(){var e=this.state.current.length?this.state.current[this.state.index].movie:null;return console.log("Movie:",e),c.a.createElement("div",{className:"rec-wrapper"},c.a.createElement("h2",null,"We recommend you to watch"),e?c.a.createElement("div",{className:"rec-movie"},c.a.createElement("h4",null,e.title.slice(0,50)),c.a.createElement("div",{className:"rec-movie-container"},c.a.createElement("img",{src:"http://image.tmdb.org/t/p/w185/".concat(e.poster_path),alt:"poster"}),c.a.createElement("p",null,e.overview.slice(0,410)))):null,c.a.createElement("div",{className:"buttons"},c.a.createElement("button",{className:"rec-button",onClick:this.onClick},"Next"),c.a.createElement(p.b,{className:"link",to:"/"},c.a.createElement("p",{className:"link-p"},"Go to main page"))))}}]),t}(c.a.Component);var w=Object(b.b)(function(e){return{movies:e.movies}},null)(k),j=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return c.a.createElement("main",null,c.a.createElement(v.a,{path:"/",exact:!0,component:h}),c.a.createElement(v.a,{path:"/genre/:genreId",exact:!0,component:O}),c.a.createElement(v.a,{path:"/recommendation",exact:!0,component:w}))}}]),t}(c.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var N=n(14),_=Object(N.c)({movies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case f:return t.payload;default:return e}}}),M=n(30),S=window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e},C=Object(N.d)(Object(N.a)(M.a),S),x=Object(N.e)(_,C);i.a.render(c.a.createElement(p.a,null,c.a.createElement(b.a,{store:x},c.a.createElement(j,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[31,1,2]]]);
//# sourceMappingURL=main.f4e9e290.chunk.js.map